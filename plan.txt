[0m[1mRefreshing Terraform state in-memory prior to plan...[0m
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.
[0m

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  [32m+[0m create
[0m
Terraform will perform the following actions:

[32m  [32m+[0m [32maws_eip.eip_Nat
[0m      id:                                          <computed>
      allocation_id:                               <computed>
      association_id:                              <computed>
      domain:                                      <computed>
      instance:                                    <computed>
      network_interface:                           <computed>
      private_ip:                                  <computed>
      public_ip:                                   <computed>
      public_ipv4_pool:                            <computed>
      vpc:                                         "true"
[0m
[0m[32m  [32m+[0m [32maws_instance.bastion
[0m      id:                                          <computed>
      ami:                                         "ami-03291866"
      arn:                                         <computed>
      associate_public_ip_address:                 "true"
      availability_zone:                           <computed>
      cpu_core_count:                              <computed>
      cpu_threads_per_core:                        <computed>
      ebs_block_device.#:                          <computed>
      ephemeral_block_device.#:                    <computed>
      get_password_data:                           "false"
      instance_state:                              <computed>
      instance_type:                               "t2.micro"
      ipv6_address_count:                          <computed>
      ipv6_addresses.#:                            <computed>
      key_name:                                    "${aws_key_pair.default.id}"
      network_interface.#:                         <computed>
      network_interface_id:                        <computed>
      password_data:                               <computed>
      placement_group:                             <computed>
      primary_network_interface_id:                <computed>
      private_dns:                                 <computed>
      private_ip:                                  <computed>
      public_dns:                                  <computed>
      public_ip:                                   <computed>
      root_block_device.#:                         <computed>
      security_groups.#:                           <computed>
      source_dest_check:                           "false"
      subnet_id:                                   "${aws_subnet.public-subnet.id}"
      tags.%:                                      "1"
      tags.Name:                                   "bastion"
      tenancy:                                     <computed>
      volume_tags.%:                               <computed>
      vpc_security_group_ids.#:                    <computed>
[0m
[0m[32m  [32m+[0m [32maws_internet_gateway.gw
[0m      id:                                          <computed>
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "VPC IGW"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_key_pair.default
[0m      id:                                          <computed>
      fingerprint:                                 <computed>
      key_name:                                    "ec2_key_pair"
      public_key:                                  "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDFjVRCfLSPOFzTSp91d0mVeNeQL3Ue16pJXKi39gjjSKr6vcbvsDeMBv542Bjqz3ZHlNa96lNJ1rOMRhTZ/biSWAsJQDZf95Yi6RolInN3jLaLtlkSyXulhAhsLMX2P8RVof4WTnqUNDibH6+qk8vUQ9MVMhn6Jp3Cdq2V7+GZHE7dKepjA7HUoykdG6AeMtEOuFnPCvSayICNuGQDO1Ui8vPhCzcFBIz9oDfoK/b2JcuFdnPNon6+ug7cl9iQVEvgrr3BJ6Mi135S4FHm51vA1EhGFoL/89zvaTYjWIJ2wykIDRQzS8qzd9rx+YLe4ImmpC8W0VUMm0pcMQBNMk6n rcald@LAPTOP-M5LFKTF2"
[0m
[0m[32m  [32m+[0m [32maws_nat_gateway.nat_gw1
[0m      id:                                          <computed>
      allocation_id:                               "${aws_eip.eip_Nat.id}"
      network_interface_id:                        <computed>
      private_ip:                                  <computed>
      public_ip:                                   <computed>
      subnet_id:                                   "${aws_subnet.public-subnet.id}"
[0m
[0m[32m  [32m+[0m [32maws_route_table.private-rt
[0m      id:                                          <computed>
      owner_id:                                    <computed>
      propagating_vgws.#:                          <computed>
      route.#:                                     "1"
      route.~1469844422.cidr_block:                "0.0.0.0/0"
      route.~1469844422.egress_only_gateway_id:    ""
      route.~1469844422.gateway_id:                ""
      route.~1469844422.instance_id:               ""
      route.~1469844422.ipv6_cidr_block:           ""
      route.~1469844422.nat_gateway_id:            "${aws_nat_gateway.nat_gw1.id}"
      route.~1469844422.network_interface_id:      ""
      route.~1469844422.transit_gateway_id:        ""
      route.~1469844422.vpc_peering_connection_id: ""
      tags.%:                                      "1"
      tags.Name:                                   "Private Subnet RT"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_route_table.public-rt
[0m      id:                                          <computed>
      owner_id:                                    <computed>
      propagating_vgws.#:                          <computed>
      route.#:                                     "1"
      route.~966145399.cidr_block:                 "0.0.0.0/0"
      route.~966145399.egress_only_gateway_id:     ""
      route.~966145399.gateway_id:                 "${aws_internet_gateway.gw.id}"
      route.~966145399.instance_id:                ""
      route.~966145399.ipv6_cidr_block:            ""
      route.~966145399.nat_gateway_id:             ""
      route.~966145399.network_interface_id:       ""
      route.~966145399.transit_gateway_id:         ""
      route.~966145399.vpc_peering_connection_id:  ""
      tags.%:                                      "1"
      tags.Name:                                   "Public Subnet RT"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_route_table_association.private-rt1
[0m      id:                                          <computed>
      route_table_id:                              "${aws_route_table.private-rt.id}"
      subnet_id:                                   "${aws_subnet.private-subnet.id}"
[0m
[0m[32m  [32m+[0m [32maws_route_table_association.private-rt2
[0m      id:                                          <computed>
      route_table_id:                              "${aws_route_table.private-rt.id}"
      subnet_id:                                   "${aws_subnet.private-subnet2.id}"
[0m
[0m[32m  [32m+[0m [32maws_route_table_association.public-rt1
[0m      id:                                          <computed>
      route_table_id:                              "${aws_route_table.public-rt.id}"
      subnet_id:                                   "${aws_subnet.public-subnet.id}"
[0m
[0m[32m  [32m+[0m [32maws_route_table_association.public-rt2
[0m      id:                                          <computed>
      route_table_id:                              "${aws_route_table.public-rt.id}"
      subnet_id:                                   "${aws_subnet.public-subnet2.id}"
[0m
[0m[32m  [32m+[0m [32maws_security_group.sgbastion
[0m      id:                                          <computed>
      arn:                                         <computed>
      description:                                 "Allow incoming SSH access and ping"
      egress.#:                                    "1"
      egress.482069346.cidr_blocks.#:              "1"
      egress.482069346.cidr_blocks.0:              "0.0.0.0/0"
      egress.482069346.description:                ""
      egress.482069346.from_port:                  "0"
      egress.482069346.ipv6_cidr_blocks.#:         "0"
      egress.482069346.prefix_list_ids.#:          "0"
      egress.482069346.protocol:                   "-1"
      egress.482069346.security_groups.#:          "0"
      egress.482069346.self:                       "false"
      egress.482069346.to_port:                    "0"
      ingress.#:                                   "2"
      ingress.1971223506.cidr_blocks.#:            "1"
      ingress.1971223506.cidr_blocks.0:            "173.172.103.202/32"
      ingress.1971223506.description:              ""
      ingress.1971223506.from_port:                "-1"
      ingress.1971223506.ipv6_cidr_blocks.#:       "0"
      ingress.1971223506.prefix_list_ids.#:        "0"
      ingress.1971223506.protocol:                 "icmp"
      ingress.1971223506.security_groups.#:        "0"
      ingress.1971223506.self:                     "false"
      ingress.1971223506.to_port:                  "-1"
      ingress.2447130443.cidr_blocks.#:            "1"
      ingress.2447130443.cidr_blocks.0:            "173.172.103.202/32"
      ingress.2447130443.description:              ""
      ingress.2447130443.from_port:                "22"
      ingress.2447130443.ipv6_cidr_blocks.#:       "0"
      ingress.2447130443.prefix_list_ids.#:        "0"
      ingress.2447130443.protocol:                 "tcp"
      ingress.2447130443.security_groups.#:        "0"
      ingress.2447130443.self:                     "false"
      ingress.2447130443.to_port:                  "22"
      name:                                        "vpc_bastion"
      owner_id:                                    <computed>
      revoke_rules_on_delete:                      "false"
      tags.%:                                      "1"
      tags.Name:                                   "Bastion SG"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_security_group.sgdb
[0m      id:                                          <computed>
      arn:                                         <computed>
      description:                                 "Allow traffic from public subnet"
      egress.#:                                    "1"
      egress.482069346.cidr_blocks.#:              "1"
      egress.482069346.cidr_blocks.0:              "0.0.0.0/0"
      egress.482069346.description:                ""
      egress.482069346.from_port:                  "0"
      egress.482069346.ipv6_cidr_blocks.#:         "0"
      egress.482069346.prefix_list_ids.#:          "0"
      egress.482069346.protocol:                   "-1"
      egress.482069346.security_groups.#:          "0"
      egress.482069346.self:                       "false"
      egress.482069346.to_port:                    "0"
      ingress.#:                                   "4"
      ingress.1500933099.cidr_blocks.#:            "1"
      ingress.1500933099.cidr_blocks.0:            "10.0.0.128/25"
      ingress.1500933099.description:              ""
      ingress.1500933099.from_port:                "-1"
      ingress.1500933099.ipv6_cidr_blocks.#:       "0"
      ingress.1500933099.prefix_list_ids.#:        "0"
      ingress.1500933099.protocol:                 "icmp"
      ingress.1500933099.security_groups.#:        "0"
      ingress.1500933099.self:                     "false"
      ingress.1500933099.to_port:                  "-1"
      ingress.3425863058.cidr_blocks.#:            "1"
      ingress.3425863058.cidr_blocks.0:            "10.0.0.0/25"
      ingress.3425863058.description:              ""
      ingress.3425863058.from_port:                "5432"
      ingress.3425863058.ipv6_cidr_blocks.#:       "0"
      ingress.3425863058.prefix_list_ids.#:        "0"
      ingress.3425863058.protocol:                 "tcp"
      ingress.3425863058.security_groups.#:        "0"
      ingress.3425863058.self:                     "false"
      ingress.3425863058.to_port:                  "5432"
      ingress.63147743.cidr_blocks.#:              "1"
      ingress.63147743.cidr_blocks.0:              "10.0.0.128/25"
      ingress.63147743.description:                ""
      ingress.63147743.from_port:                  "5432"
      ingress.63147743.ipv6_cidr_blocks.#:         "0"
      ingress.63147743.prefix_list_ids.#:          "0"
      ingress.63147743.protocol:                   "tcp"
      ingress.63147743.security_groups.#:          "0"
      ingress.63147743.self:                       "false"
      ingress.63147743.to_port:                    "5432"
      ingress.646273512.cidr_blocks.#:             "1"
      ingress.646273512.cidr_blocks.0:             "10.0.0.0/25"
      ingress.646273512.description:               ""
      ingress.646273512.from_port:                 "-1"
      ingress.646273512.ipv6_cidr_blocks.#:        "0"
      ingress.646273512.prefix_list_ids.#:         "0"
      ingress.646273512.protocol:                  "icmp"
      ingress.646273512.security_groups.#:         "0"
      ingress.646273512.self:                      "false"
      ingress.646273512.to_port:                   "-1"
      name:                                        "sg_app"
      owner_id:                                    <computed>
      revoke_rules_on_delete:                      "false"
      tags.%:                                      "1"
      tags.Name:                                   "DB SG"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_subnet.private-db-subnet
[0m      id:                                          <computed>
      arn:                                         <computed>
      assign_ipv6_address_on_creation:             "false"
      availability_zone:                           "us-east-2b"
      availability_zone_id:                        <computed>
      cidr_block:                                  "10.0.2.0/25"
      ipv6_cidr_block:                             <computed>
      ipv6_cidr_block_association_id:              <computed>
      map_public_ip_on_launch:                     "false"
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "Database Private Subnet 1"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_subnet.private-db-subnet2
[0m      id:                                          <computed>
      arn:                                         <computed>
      assign_ipv6_address_on_creation:             "false"
      availability_zone:                           "us-east-2b"
      availability_zone_id:                        <computed>
      cidr_block:                                  "10.0.2.128/25"
      ipv6_cidr_block:                             <computed>
      ipv6_cidr_block_association_id:              <computed>
      map_public_ip_on_launch:                     "false"
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "Database Private Subnet 2"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_subnet.private-subnet
[0m      id:                                          <computed>
      arn:                                         <computed>
      assign_ipv6_address_on_creation:             "false"
      availability_zone:                           "us-east-2b"
      availability_zone_id:                        <computed>
      cidr_block:                                  "10.0.1.0/25"
      ipv6_cidr_block:                             <computed>
      ipv6_cidr_block_association_id:              <computed>
      map_public_ip_on_launch:                     "false"
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "App Private Subnet 1"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_subnet.private-subnet2
[0m      id:                                          <computed>
      arn:                                         <computed>
      assign_ipv6_address_on_creation:             "false"
      availability_zone:                           "us-east-2b"
      availability_zone_id:                        <computed>
      cidr_block:                                  "10.0.1.128/25"
      ipv6_cidr_block:                             <computed>
      ipv6_cidr_block_association_id:              <computed>
      map_public_ip_on_launch:                     "false"
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "App Private Subnet 2"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_subnet.public-subnet
[0m      id:                                          <computed>
      arn:                                         <computed>
      assign_ipv6_address_on_creation:             "false"
      availability_zone:                           "us-east-2a"
      availability_zone_id:                        <computed>
      cidr_block:                                  "10.0.0.0/25"
      ipv6_cidr_block:                             <computed>
      ipv6_cidr_block_association_id:              <computed>
      map_public_ip_on_launch:                     "false"
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "Web Public Subnet 1"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_subnet.public-subnet2
[0m      id:                                          <computed>
      arn:                                         <computed>
      assign_ipv6_address_on_creation:             "false"
      availability_zone:                           "us-east-2b"
      availability_zone_id:                        <computed>
      cidr_block:                                  "10.0.0.128/25"
      ipv6_cidr_block:                             <computed>
      ipv6_cidr_block_association_id:              <computed>
      map_public_ip_on_launch:                     "false"
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "Web Public Subnet 2"
      vpc_id:                                      "${aws_vpc.default.id}"
[0m
[0m[32m  [32m+[0m [32maws_vpc.default
[0m      id:                                          <computed>
      arn:                                         <computed>
      assign_generated_ipv6_cidr_block:            "false"
      cidr_block:                                  "10.0.0.0/16"
      default_network_acl_id:                      <computed>
      default_route_table_id:                      <computed>
      default_security_group_id:                   <computed>
      dhcp_options_id:                             <computed>
      enable_classiclink:                          <computed>
      enable_classiclink_dns_support:              <computed>
      enable_dns_hostnames:                        "true"
      enable_dns_support:                          "true"
      instance_tenancy:                            "default"
      ipv6_association_id:                         <computed>
      ipv6_cidr_block:                             <computed>
      main_route_table_id:                         <computed>
      owner_id:                                    <computed>
      tags.%:                                      "1"
      tags.Name:                                   "DevOps POC VPC"
[0m
[0m
[0m[1mPlan:[0m 20 to add, 0 to change, 0 to destroy.[0m

------------------------------------------------------------------------

Note: You didn't specify an "-out" parameter to save this plan, so Terraform
can't guarantee that exactly these actions will be performed if
"terraform apply" is subsequently run.

